{"ast":null,"code":"import React from'react';import{useQuery}from'react-query';import{MessageSquare,AlertCircle,Clock}from'lucide-react';import{useAuth}from'../../contexts/AuthContext';import{announcementsAPI}from'../../services/api';import LoadingSpinner from'../common/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Announcements=()=>{var _announcementsData$da;const{user}=useAuth();const{data:announcementsData,isLoading}=useQuery(['announcements',user===null||user===void 0?void 0:user.grade_id,user===null||user===void 0?void 0:user.class_id],()=>user!==null&&user!==void 0&&user.grade_id&&user!==null&&user!==void 0&&user.class_id?announcementsAPI.getAnnouncements(user.grade_id,user.class_id):null,{enabled:!!(user!==null&&user!==void 0&&user.grade_id&&user!==null&&user!==void 0&&user.class_id)});const announcements=(announcementsData===null||announcementsData===void 0?void 0:(_announcementsData$da=announcementsData.data)===null||_announcementsData$da===void 0?void 0:_announcementsData$da.announcements)||[];const getPriorityColor=priority=>{switch(priority){case'urgent':return'bg-red-100 text-red-800 border-red-200';case'high':return'bg-yellow-100 text-yellow-800 border-yellow-200';case'normal':return'bg-blue-100 text-blue-800 border-blue-200';default:return'bg-gray-100 text-gray-800 border-gray-200';}};const getPriorityIcon=priority=>{switch(priority){case'urgent':return AlertCircle;case'high':return AlertCircle;default:return MessageSquare;}};if(isLoading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Announcements\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:announcements.length>0?announcements.map(announcement=>{const IconComponent=getPriorityIcon(announcement.priority);return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-2\",children:[/*#__PURE__*/_jsx(IconComponent,{className:\"h-5 w-5 text-blue-600\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:announcement.title}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(getPriorityColor(announcement.priority)),children:announcement.priority})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:announcement.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-gray-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-4 w-4 mr-1\"}),new Date(announcement.created_at).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"By: \",announcement.author_first_name,\" \",announcement.author_last_name]})]})]})})},announcement.id);}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No announcements\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"There are no announcements for your class yet.\"})]})})]});};export default Announcements;","map":{"version":3,"names":["React","useQuery","MessageSquare","AlertCircle","Clock","useAuth","announcementsAPI","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Announcements","_announcementsData$da","user","data","announcementsData","isLoading","grade_id","class_id","getAnnouncements","enabled","announcements","getPriorityColor","priority","getPriorityIcon","className","children","length","map","announcement","IconComponent","title","concat","content","Date","created_at","toLocaleDateString","author_first_name","author_last_name","id"],"sources":["C:/Users/HUAWEI/OneDrive/harmony learning institute/client/src/components/announcements/Announcements.js"],"sourcesContent":["import React from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { MessageSquare, AlertCircle, Clock } from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { announcementsAPI } from '../../services/api';\r\nimport LoadingSpinner from '../common/LoadingSpinner';\r\n\r\nconst Announcements = () => {\r\n  const { user } = useAuth();\r\n\r\n  const { data: announcementsData, isLoading } = useQuery(\r\n    ['announcements', user?.grade_id, user?.class_id],\r\n    () => user?.grade_id && user?.class_id ? announcementsAPI.getAnnouncements(user.grade_id, user.class_id) : null,\r\n    { enabled: !!(user?.grade_id && user?.class_id) }\r\n  );\r\n\r\n  const announcements = announcementsData?.data?.announcements || [];\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'bg-red-100 text-red-800 border-red-200';\r\n      case 'high': return 'bg-yellow-100 text-yellow-800 border-yellow-200';\r\n      case 'normal': return 'bg-blue-100 text-blue-800 border-blue-200';\r\n      default: return 'bg-gray-100 text-gray-800 border-gray-200';\r\n    }\r\n  };\r\n\r\n  const getPriorityIcon = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent': return AlertCircle;\r\n      case 'high': return AlertCircle;\r\n      default: return MessageSquare;\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900\">Announcements</h1>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        {announcements.length > 0 ? (\r\n          announcements.map((announcement) => {\r\n            const IconComponent = getPriorityIcon(announcement.priority);\r\n            return (\r\n              <div key={announcement.id} className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center space-x-3 mb-2\">\r\n                      <IconComponent className=\"h-5 w-5 text-blue-600\" />\r\n                      <h2 className=\"text-xl font-semibold text-gray-900\">{announcement.title}</h2>\r\n                      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getPriorityColor(announcement.priority)}`}>\r\n                        {announcement.priority}\r\n                      </span>\r\n                    </div>\r\n                    <p className=\"text-gray-600 mb-4\">{announcement.content}</p>\r\n                    <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\r\n                      <div className=\"flex items-center\">\r\n                        <Clock className=\"h-4 w-4 mr-1\" />\r\n                        {new Date(announcement.created_at).toLocaleDateString()}\r\n                      </div>\r\n                      <div>\r\n                        By: {announcement.author_first_name} {announcement.author_last_name}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <div className=\"text-center py-12\">\r\n            <MessageSquare className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No announcements</h3>\r\n            <p className=\"mt-1 text-sm text-gray-500\">\r\n              There are no announcements for your class yet.\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Announcements;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,aAAa,CACtC,OAASC,aAAa,CAAEC,WAAW,CAAEC,KAAK,KAAQ,cAAc,CAChE,OAASC,OAAO,KAAQ,4BAA4B,CACpD,OAASC,gBAAgB,KAAQ,oBAAoB,CACrD,MAAO,CAAAC,cAAc,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtD,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CAC1B,KAAM,CAAEC,IAAK,CAAC,CAAGT,OAAO,CAAC,CAAC,CAE1B,KAAM,CAAEU,IAAI,CAAEC,iBAAiB,CAAEC,SAAU,CAAC,CAAGhB,QAAQ,CACrD,CAAC,eAAe,CAAEa,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEI,QAAQ,CAAEJ,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEK,QAAQ,CAAC,CACjD,IAAML,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEI,QAAQ,EAAIJ,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEK,QAAQ,CAAGb,gBAAgB,CAACc,gBAAgB,CAACN,IAAI,CAACI,QAAQ,CAAEJ,IAAI,CAACK,QAAQ,CAAC,CAAG,IAAI,CAC/G,CAAEE,OAAO,CAAE,CAAC,EAAEP,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEI,QAAQ,EAAIJ,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEK,QAAQ,CAAE,CAClD,CAAC,CAED,KAAM,CAAAG,aAAa,CAAG,CAAAN,iBAAiB,SAAjBA,iBAAiB,kBAAAH,qBAAA,CAAjBG,iBAAiB,CAAED,IAAI,UAAAF,qBAAA,iBAAvBA,qBAAA,CAAyBS,aAAa,GAAI,EAAE,CAElE,KAAM,CAAAC,gBAAgB,CAAIC,QAAQ,EAAK,CACrC,OAAQA,QAAQ,EACd,IAAK,QAAQ,CAAE,MAAO,wCAAwC,CAC9D,IAAK,MAAM,CAAE,MAAO,iDAAiD,CACrE,IAAK,QAAQ,CAAE,MAAO,2CAA2C,CACjE,QAAS,MAAO,2CAA2C,CAC7D,CACF,CAAC,CAED,KAAM,CAAAC,eAAe,CAAID,QAAQ,EAAK,CACpC,OAAQA,QAAQ,EACd,IAAK,QAAQ,CAAE,MAAO,CAAArB,WAAW,CACjC,IAAK,MAAM,CAAE,MAAO,CAAAA,WAAW,CAC/B,QAAS,MAAO,CAAAD,aAAa,CAC/B,CACF,CAAC,CAED,GAAIe,SAAS,CAAE,CACb,mBAAOR,IAAA,CAACF,cAAc,GAAE,CAAC,CAC3B,CAEA,mBACEI,KAAA,QAAKe,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBlB,IAAA,QAAKiB,SAAS,CAAC,mCAAmC,CAAAC,QAAA,cAChDlB,IAAA,OAAIiB,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,CAChE,CAAC,cAENlB,IAAA,QAAKiB,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBL,aAAa,CAACM,MAAM,CAAG,CAAC,CACvBN,aAAa,CAACO,GAAG,CAAEC,YAAY,EAAK,CAClC,KAAM,CAAAC,aAAa,CAAGN,eAAe,CAACK,YAAY,CAACN,QAAQ,CAAC,CAC5D,mBACEf,IAAA,QAA2BiB,SAAS,CAAC,0DAA0D,CAAAC,QAAA,cAC7FlB,IAAA,QAAKiB,SAAS,CAAC,kCAAkC,CAAAC,QAAA,cAC/ChB,KAAA,QAAKe,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBhB,KAAA,QAAKe,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC/ClB,IAAA,CAACsB,aAAa,EAACL,SAAS,CAAC,uBAAuB,CAAE,CAAC,cACnDjB,IAAA,OAAIiB,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAEG,YAAY,CAACE,KAAK,CAAK,CAAC,cAC7EvB,IAAA,SAAMiB,SAAS,4EAAAO,MAAA,CAA6EV,gBAAgB,CAACO,YAAY,CAACN,QAAQ,CAAC,CAAG,CAAAG,QAAA,CACnIG,YAAY,CAACN,QAAQ,CAClB,CAAC,EACJ,CAAC,cACNf,IAAA,MAAGiB,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAEG,YAAY,CAACI,OAAO,CAAI,CAAC,cAC5DvB,KAAA,QAAKe,SAAS,CAAC,mDAAmD,CAAAC,QAAA,eAChEhB,KAAA,QAAKe,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChClB,IAAA,CAACL,KAAK,EAACsB,SAAS,CAAC,cAAc,CAAE,CAAC,CACjC,GAAI,CAAAS,IAAI,CAACL,YAAY,CAACM,UAAU,CAAC,CAACC,kBAAkB,CAAC,CAAC,EACpD,CAAC,cACN1B,KAAA,QAAAgB,QAAA,EAAK,MACC,CAACG,YAAY,CAACQ,iBAAiB,CAAC,GAAC,CAACR,YAAY,CAACS,gBAAgB,EAChE,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,EArBET,YAAY,CAACU,EAsBlB,CAAC,CAEV,CAAC,CAAC,cAEF7B,KAAA,QAAKe,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChClB,IAAA,CAACP,aAAa,EAACwB,SAAS,CAAC,iCAAiC,CAAE,CAAC,cAC7DjB,IAAA,OAAIiB,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cAC5ElB,IAAA,MAAGiB,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,gDAE1C,CAAG,CAAC,EACD,CACN,CACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAf,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}