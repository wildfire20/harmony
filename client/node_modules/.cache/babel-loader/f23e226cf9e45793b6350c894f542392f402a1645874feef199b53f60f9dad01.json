{"ast":null,"code":"import React from'react';import{useQuery}from'react-query';import{Link}from'react-router-dom';import{BookOpen,Clock,CheckCircle,AlertTriangle}from'lucide-react';import{useAuth}from'../../contexts/AuthContext';import{tasksAPI}from'../../services/api';import LoadingSpinner from'../common/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Tasks=()=>{var _tasksData$data;const{user}=useAuth();const{data:tasksData,isLoading}=useQuery(['tasks',user===null||user===void 0?void 0:user.grade_id,user===null||user===void 0?void 0:user.class_id],()=>user!==null&&user!==void 0&&user.grade_id&&user!==null&&user!==void 0&&user.class_id?tasksAPI.getTasks(user.grade_id,user.class_id):null,{enabled:!!(user!==null&&user!==void 0&&user.grade_id&&user!==null&&user!==void 0&&user.class_id)});const tasks=(tasksData===null||tasksData===void 0?void 0:(_tasksData$data=tasksData.data)===null||_tasksData$data===void 0?void 0:_tasksData$data.tasks)||[];if(isLoading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Tasks & Assignments\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-6\",children:tasks.length>0?tasks.map(task=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"h-5 w-5 text-blue-600\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:task.title}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(task.task_type==='quiz'?'bg-purple-100 text-purple-800':'bg-blue-100 text-blue-800'),children:task.task_type==='quiz'?'Quiz':'Assignment'})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:task.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex items-center space-x-4 text-sm text-gray-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-4 w-4 mr-1\"}),\"Due: \",new Date(task.due_date).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Max Points: \",task.max_points]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[task.submission_id?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center text-green-600\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 mr-1\"}),\"Submitted\"]}):new Date(task.due_date)<=new Date()?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center text-red-600\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"h-5 w-5 mr-1\"}),\"Overdue\"]}):/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center text-yellow-600\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-5 w-5 mr-1\"}),\"Pending\"]}),/*#__PURE__*/_jsx(Link,{to:\"/tasks/\".concat(task.id),className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:\"View Details\"})]})]})},task.id)):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No tasks found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"There are no tasks assigned to your class yet.\"})]})})]});};export default Tasks;","map":{"version":3,"names":["React","useQuery","Link","BookOpen","Clock","CheckCircle","AlertTriangle","useAuth","tasksAPI","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Tasks","_tasksData$data","user","data","tasksData","isLoading","grade_id","class_id","getTasks","enabled","tasks","className","children","length","map","task","title","concat","task_type","description","Date","due_date","toLocaleDateString","max_points","submission_id","to","id"],"sources":["C:/Users/HUAWEI/OneDrive/harmony learning institute/client/src/components/tasks/Tasks.js"],"sourcesContent":["import React from 'react';\r\nimport { useQuery } from 'react-query';\r\nimport { Link } from 'react-router-dom';\r\nimport { BookOpen, Clock, CheckCircle, AlertTriangle } from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { tasksAPI } from '../../services/api';\r\nimport LoadingSpinner from '../common/LoadingSpinner';\r\n\r\nconst Tasks = () => {\r\n  const { user } = useAuth();\r\n\r\n  const { data: tasksData, isLoading } = useQuery(\r\n    ['tasks', user?.grade_id, user?.class_id],\r\n    () => user?.grade_id && user?.class_id ? tasksAPI.getTasks(user.grade_id, user.class_id) : null,\r\n    { enabled: !!(user?.grade_id && user?.class_id) }\r\n  );\r\n\r\n  const tasks = tasksData?.data?.tasks || [];\r\n\r\n  if (isLoading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900\">Tasks & Assignments</h1>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 gap-6\">\r\n        {tasks.length > 0 ? (\r\n          tasks.map((task) => (\r\n            <div key={task.id} className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <BookOpen className=\"h-5 w-5 text-blue-600\" />\r\n                    <h2 className=\"text-xl font-semibold text-gray-900\">{task.title}</h2>\r\n                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                      task.task_type === 'quiz' ? 'bg-purple-100 text-purple-800' : 'bg-blue-100 text-blue-800'\r\n                    }`}>\r\n                      {task.task_type === 'quiz' ? 'Quiz' : 'Assignment'}\r\n                    </span>\r\n                  </div>\r\n                  <p className=\"mt-2 text-gray-600\">{task.description}</p>\r\n                  <div className=\"mt-4 flex items-center space-x-4 text-sm text-gray-500\">\r\n                    <div className=\"flex items-center\">\r\n                      <Clock className=\"h-4 w-4 mr-1\" />\r\n                      Due: {new Date(task.due_date).toLocaleDateString()}\r\n                    </div>\r\n                    <div>Max Points: {task.max_points}</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center space-x-3\">\r\n                  {task.submission_id ? (\r\n                    <span className=\"flex items-center text-green-600\">\r\n                      <CheckCircle className=\"h-5 w-5 mr-1\" />\r\n                      Submitted\r\n                    </span>\r\n                  ) : new Date(task.due_date) <= new Date() ? (\r\n                    <span className=\"flex items-center text-red-600\">\r\n                      <AlertTriangle className=\"h-5 w-5 mr-1\" />\r\n                      Overdue\r\n                    </span>\r\n                  ) : (\r\n                    <span className=\"flex items-center text-yellow-600\">\r\n                      <Clock className=\"h-5 w-5 mr-1\" />\r\n                      Pending\r\n                    </span>\r\n                  )}\r\n                  <Link\r\n                    to={`/tasks/${task.id}`}\r\n                    className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\r\n                  >\r\n                    View Details\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"text-center py-12\">\r\n            <BookOpen className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No tasks found</h3>\r\n            <p className=\"mt-1 text-sm text-gray-500\">\r\n              There are no tasks assigned to your class yet.\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Tasks;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}