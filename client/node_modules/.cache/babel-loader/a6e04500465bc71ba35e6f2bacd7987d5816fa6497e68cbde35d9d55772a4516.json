{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{QueryClient,QueryClientProvider}from'react-query';import{Toaster}from'react-hot-toast';import{AuthProvider}from'./contexts/AuthContext';import{useAuth}from'./contexts/AuthContext';import{ThemeProvider}from'./components/common/ThemeProvider';// Components\nimport Login from'./components/auth/Login';import Dashboard from'./components/dashboard/Dashboard';import Layout from'./components/layout/Layout';import StudentDashboard from'./components/dashboard/StudentDashboard';import TeacherDashboard from'./components/dashboard/TeacherDashboard';import AdminDashboard from'./components/dashboard/AdminDashboard';import Tasks from'./components/tasks/Tasks';import TaskDetails from'./components/tasks/TaskDetails';import QuizPlayer from'./components/quizzes/QuizPlayer';import QuizResults from'./components/quiz/QuizResults';import Announcements from'./components/announcements/Announcements';import Profile from'./components/profile/Profile';import AdminPanel from'./components/admin/AdminPanel';import DocumentLibrary from'./components/documents/DocumentLibrary';import LoadingSpinner from'./components/common/LoadingSpinner';// Create a client\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const queryClient=new QueryClient({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:false}}});// Protected Route Component\nconst ProtectedRoute=_ref=>{let{children,roles=[]}=_ref;const{user,loading}=useAuth();if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}if(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}if(roles.length>0&&!roles.includes(user.role)){return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true});}return children;};// Public Route Component (redirects to dashboard if logged in)\nconst PublicRoute=_ref2=>{let{children}=_ref2;const{user,loading}=useAuth();if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}if(user){return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true});}return children;};// Main App Component\nconst AppContent=()=>{const{user}=useAuth();return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(PublicRoute,{children:/*#__PURE__*/_jsx(Login,{})})}),/*#__PURE__*/_jsxs(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Layout,{})}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"tasks\",element:/*#__PURE__*/_jsx(Tasks,{})}),/*#__PURE__*/_jsx(Route,{path:\"tasks/:id\",element:/*#__PURE__*/_jsx(TaskDetails,{})}),/*#__PURE__*/_jsx(Route,{path:\"quiz/:taskId\",element:/*#__PURE__*/_jsx(QuizPlayer,{})}),/*#__PURE__*/_jsx(Route,{path:\"quiz-results\",element:/*#__PURE__*/_jsx(QuizResults,{})}),/*#__PURE__*/_jsx(Route,{path:\"announcements\",element:/*#__PURE__*/_jsx(Announcements,{})}),/*#__PURE__*/_jsx(Route,{path:\"documents\",element:/*#__PURE__*/_jsx(DocumentLibrary,{})}),/*#__PURE__*/_jsx(Route,{path:\"profile\",element:/*#__PURE__*/_jsx(Profile,{})}),/*#__PURE__*/_jsx(Route,{path:\"admin\",element:/*#__PURE__*/_jsx(ProtectedRoute,{roles:['admin','super_admin'],children:/*#__PURE__*/_jsx(AdminPanel,{})})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})})]});};const App=()=>{return/*#__PURE__*/_jsx(QueryClientProvider,{client:queryClient,children:/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(ThemeProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen\",children:[/*#__PURE__*/_jsx(AppContent,{}),/*#__PURE__*/_jsx(Toaster,{position:\"top-right\",toastOptions:{duration:4000,style:{background:'#363636',color:'#fff',borderRadius:'8px',fontSize:'14px'},success:{style:{background:'#059669'}},error:{style:{background:'#dc2626'}},loading:{style:{background:'#1e40af'}}}})]})})})})});};export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","QueryClient","QueryClientProvider","Toaster","AuthProvider","useAuth","ThemeProvider","Login","Dashboard","Layout","StudentDashboard","TeacherDashboard","AdminDashboard","Tasks","TaskDetails","QuizPlayer","QuizResults","Announcements","Profile","AdminPanel","DocumentLibrary","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","queryClient","defaultOptions","queries","retry","refetchOnWindowFocus","ProtectedRoute","_ref","children","roles","user","loading","to","replace","length","includes","role","PublicRoute","_ref2","AppContent","path","element","index","App","client","className","position","toastOptions","duration","style","background","color","borderRadius","fontSize","success","error"],"sources":["C:/Users/HUAWEI/OneDrive/harmony learning institute/client/src/App.js"],"sourcesContent":["import React from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\r\nimport { QueryClient, QueryClientProvider } from 'react-query';\r\nimport { Toaster } from 'react-hot-toast';\r\nimport { AuthProvider } from './contexts/AuthContext';\r\nimport { useAuth } from './contexts/AuthContext';\r\nimport { ThemeProvider } from './components/common/ThemeProvider';\r\n\r\n// Components\r\nimport Login from './components/auth/Login';\r\nimport Dashboard from './components/dashboard/Dashboard';\r\nimport Layout from './components/layout/Layout';\r\nimport StudentDashboard from './components/dashboard/StudentDashboard';\r\nimport TeacherDashboard from './components/dashboard/TeacherDashboard';\r\nimport AdminDashboard from './components/dashboard/AdminDashboard';\r\nimport Tasks from './components/tasks/Tasks';\r\nimport TaskDetails from './components/tasks/TaskDetails';\r\nimport QuizPlayer from './components/quizzes/QuizPlayer';\r\nimport QuizResults from './components/quiz/QuizResults';\r\nimport Announcements from './components/announcements/Announcements';\r\nimport Profile from './components/profile/Profile';\r\nimport AdminPanel from './components/admin/AdminPanel';\r\nimport DocumentLibrary from './components/documents/DocumentLibrary';\r\nimport LoadingSpinner from './components/common/LoadingSpinner';\r\n\r\n// Create a client\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      retry: 1,\r\n      refetchOnWindowFocus: false,\r\n    },\r\n  },\r\n});\r\n\r\n// Protected Route Component\r\nconst ProtectedRoute = ({ children, roles = [] }) => {\r\n  const { user, loading } = useAuth();\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  if (roles.length > 0 && !roles.includes(user.role)) {\r\n    return <Navigate to=\"/dashboard\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Public Route Component (redirects to dashboard if logged in)\r\nconst PublicRoute = ({ children }) => {\r\n  const { user, loading } = useAuth();\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  if (user) {\r\n    return <Navigate to=\"/dashboard\" replace />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\n// Main App Component\r\nconst AppContent = () => {\r\n  const { user } = useAuth();\r\n\r\n  return (\r\n    <Routes>\r\n      <Route path=\"/login\" element={\r\n        <PublicRoute>\r\n          <Login />\r\n        </PublicRoute>\r\n      } />\r\n      \r\n      <Route path=\"/\" element={\r\n        <ProtectedRoute>\r\n          <Layout />\r\n        </ProtectedRoute>\r\n      }>\r\n        <Route index element={<Navigate to=\"/dashboard\" replace />} />\r\n        \r\n        <Route path=\"dashboard\" element={<Dashboard />} />\r\n        \r\n        <Route path=\"tasks\" element={<Tasks />} />\r\n        <Route path=\"tasks/:id\" element={<TaskDetails />} />\r\n        <Route path=\"quiz/:taskId\" element={<QuizPlayer />} />\r\n        <Route path=\"quiz-results\" element={<QuizResults />} />\r\n        \r\n        <Route path=\"announcements\" element={<Announcements />} />\r\n        \r\n        <Route path=\"documents\" element={<DocumentLibrary />} />\r\n        \r\n        <Route path=\"profile\" element={<Profile />} />\r\n        \r\n        <Route path=\"admin\" element={\r\n          <ProtectedRoute roles={['admin', 'super_admin']}>\r\n            <AdminPanel />\r\n          </ProtectedRoute>\r\n        } />\r\n      </Route>\r\n      \r\n      <Route path=\"*\" element={<Navigate to=\"/dashboard\" replace />} />\r\n    </Routes>\r\n  );\r\n};\r\n\r\nconst App = () => {\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <AuthProvider>\r\n        <ThemeProvider>\r\n          <Router>\r\n            <div className=\"min-h-screen\">\r\n              <AppContent />\r\n              <Toaster\r\n                position=\"top-right\"\r\n                toastOptions={{\r\n                  duration: 4000,\r\n                  style: {\r\n                    background: '#363636',\r\n                    color: '#fff',\r\n                    borderRadius: '8px',\r\n                    fontSize: '14px',\r\n                  },\r\n                  success: {\r\n                    style: {\r\n                      background: '#059669',\r\n                    },\r\n                  },\r\n                  error: {\r\n                    style: {\r\n                      background: '#dc2626',\r\n                    },\r\n                  },\r\n                  loading: {\r\n                    style: {\r\n                      background: '#1e40af',\r\n                    },\r\n                  },\r\n                }}\r\n              />\r\n            </div>\r\n          </Router>\r\n        </ThemeProvider>\r\n      </AuthProvider>\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}